<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="log.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=PT+Sans+Narrow&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Krona+One&display=swap');
		
        </style>

    
    <title>Tuition Reimbursement Management System</title>

 


</head>
<body>

    <nav>
        <div class="logo">
            
            <img src="logo.png" alt="">
        </div>
            <ul class="nav-links">
                <li><a href="employee.html">Tuition Reimbursement</a></li>
                <li><a href="contact.html">Contact Information</a></li>
                <li><a href="login.html">Log in</a></li>
                
            </ul>

    </nav>

  <div class="wrapper">
  <div class="left">
      <p>Welcome to the Admin Page</p> 
      
      <select class="names" id="names"></select>
      <select class="data" id="data"></select>
      <select class="train" id="train"></select>
      
  </div>
  <div class="right">

    
    <div class="signup">

    </div>
    
    <div class="login" id="login">
	        
        
     
    </div>
    
  </div>
</div>

    <footer style="width:98.5%;">
        
            <div class="l-footer">
                <h3></h3>
                <p></p>
                

            </div>
            <ul class="r-footer">
			<br />
				<p></p>                 
                <!--<li><p></p></li>-->
            </ul>

        </div>
    </footer>
    </body>

    <script>

        const TRAINING_URL = 'http://localhost:7000/trainings';
        
        const select = document.querySelector('.names');
        const select2 = document.querySelector('.data');
        const select3 = document.querySelector('.train');

        const nameArray = [];
        const idArray = [];
        

        
        fetch(TRAINING_URL).then(res => {
            return res.json();
          }).then(data => {
            for (let i = 0; i < data.length; i++) {
               
                
            const fname = data[i].employeeId.firstName;
            
            const lname = data[i].employeeId.lastName;
            const id = data[i].employeeId.id;

            nameArray[i] = fname + " " + lname;
            
            idArray[i] = id;
            }

            function removeDuplicates(array) {
  return array.filter((a, b) => array.indexOf(a) === b)
};
            const newArray = removeDuplicates(nameArray);
            const newArray2 = removeDuplicates(idArray);
            
           

            
            const option2 = document.createElement('option');
            option2.innerText = "- Select a Employee -";
            select.appendChild(option2);
            for (let i = 0; i < newArray.length; i++) {
              const option = document.createElement('option');
              option.value = newArray2[i];
              option.innerText = newArray[i];
              select.appendChild(option);
            }
            
          });

          select.addEventListener('change', event => {

            for (let i = 0; i < 40; i++) {
    var x = document.getElementById("train");
    x.remove(x.selectedIndex);
            }
            for (let i = 0; i < 40; i++) {
    var x = document.getElementById("data");
    x.remove(x.selectedIndex);
  }

  var selector = document.getElementById('names');
    var val = selector.options[selector.selectedIndex].value;

  const option3 = document.createElement('option');
  option3.innerText = "- Select a Catagory -";
  select2.appendChild(option3);

  const option4 = document.createElement('option');
  option4.innerText = "Training";

  select2.appendChild(option4);

  const option5 = document.createElement('option');
  option5.innerText = "Employee";
  option5.value = val;
  select2.appendChild(option5);

  const option7 = document.createElement('option');
  option7.innerText = "Management";

  select2.appendChild(option7);

  const option8 = document.createElement('option');
  option8.innerText = "Grading";

  select2.appendChild(option8);

});





select2.addEventListener('change', event => {

 
     
    var selector = document.getElementById('names');
    var val = selector.options[selector.selectedIndex].value;
    var val2 = document.getElementById("data").selectedIndex;

 

    if(val2 == 1){
   
    const TRAININGbyE_URL = 'http://localhost:7000/trainings2/' + val;
        
    fetch(TRAININGbyE_URL).then(res => {
            return res.json();
          }).then(data2 => {

   
            
               const option10 = document.createElement('option');
               option10.innerText = "- Select a Training -";
               select3.appendChild(option10);
               for (let i = 0; i < data2.length; i++) {
                 const option11 = document.createElement('option');
                 option11.value = data2[i].id;
                 option11.innerText = "Training Number " + (i+1);
                 select3.appendChild(option11);
                 
               }
                           
          });
    } else{
        for (let i = 0; i < 40; i++) {
    var x = document.getElementById("train");
    x.remove(x.selectedIndex);
  }

    }

 
    const element = document.getElementById("login"); 
    
    console.log("test1");

    switch (val2) {

  case 1:

  while (element.firstChild) {
    element.removeChild(element.lastChild);
  }

  select3.addEventListener('change', event => {
    console.log("test2");
  selector2 = document.getElementById('train');
  val3 = selector2.options[selector2.selectedIndex].value;
  valdrop = document.getElementById("train").selectedIndex;
  val4 = valdrop -1;

  
  const URL2 = 'http://localhost:7000/trainings2/' + val;
  fetch(URL2).then(res => {
            return res.json();
          }).then(data3 => {
            console.log(val4);
            console.log(data3);
            var ms = data3[val4].eventId.datefiled;
            var utcSeconds = new Date(1000*Math.round(ms/1000));
            


    const para1 = document.createElement("h3");
const node1 = document.createTextNode("Employee Training");
para1.appendChild(node1);
element.appendChild(para1);

const tt1 = document.createElement("p");
const nn1 = document.createTextNode("date filed " + utcSeconds);
tt1.appendChild(nn1);
element.appendChild(tt1);

const tt2 = document.createElement("p");
const nn2 = document.createTextNode("training start date " + data3[val4].eventId.dateOfStart);
tt2.appendChild(nn2);
element.appendChild(tt2);

const tt3 = document.createElement("p");
const nn3 = document.createTextNode("training description " + data3[val4].eventId.description);
tt3.appendChild(nn3);
element.appendChild(tt3);

const tt4 = document.createElement("p");
const nn4 = document.createTextNode("training location " + data3[val4].eventId.location);
tt4.appendChild(nn4);
element.appendChild(tt4);

const tt5 = document.createElement("p");
const nn5 = document.createTextNode("training type " + data3[val4].eventId.type);
tt5.appendChild(nn5);
element.appendChild(tt5);

const tt6 = document.createElement("p");
const nn6 = document.createTextNode("work missed by training " + data3[val4].eventId.workMissed);
tt6.appendChild(nn6);
element.appendChild(tt6);

const tt7 = document.createElement("p");
const nn7 = document.createTextNode("cancelled by employee " + data3[val4].cancelledByEmployee);
tt7.appendChild(nn7);
element.appendChild(tt7);


const tt8 = document.createElement("label");
const nn8 = document.createTextNode("denied by reason");
tt8.appendChild(nn8);
element.appendChild(tt8);
const tt9 = document.createElement("textarea");
const nn9 = document.createTextNode(data3[val4].deniedByDSReason);
tt9.appendChild(nn9);
element.appendChild(tt9);

const tt10 = document.createElement("label");
const nn10 = document.createTextNode("denied by reason");
tt10.appendChild(nn10);
element.appendChild(tt10);
const tt11 = document.createElement("textarea");
const nn11 = document.createTextNode(data3[val4].deniedByDSReason);
tt11.appendChild(nn11);
element.appendChild(tt11);

const tt12 = document.createElement("label");
const nn12 = document.createTextNode("denied by reason");
tt12.appendChild(nn12);
element.appendChild(tt12);
const tt13 = document.createElement("textarea");
const nn13 = document.createTextNode(data3[val4].deniedByDSReason);
tt13.appendChild(nn13);
element.appendChild(tt13);

});
  });
    break;






  case 2:
  while (element.firstChild) {
    element.removeChild(element.lastChild);
  }
  const URL = 'http://localhost:7000/employees/' + val;
  fetch(URL).then(res => {
            return res.json();
          }).then(data => {

            
  
  const para2 = document.createElement("h3");
const node2 = document.createTextNode("Employee Information");
para2.appendChild(node2);
element.appendChild(para2);


const tr = document.createElement("p");
const nr = document.createTextNode("Remaining tuition reimbursement $" + data.tReimbur);
tr.appendChild(nr);
element.appendChild(tr);

const tr2 = document.createElement("p");
const nr2 = document.createTextNode(data.contactId.address1);
tr2.appendChild(nr2);
element.appendChild(tr2);

const tr3 = document.createElement("p");
const nr3 = document.createTextNode(data.contactId.address2);
tr3.appendChild(nr3);
element.appendChild(tr3);

const tr4 = document.createElement("p");
const nr4 = document.createTextNode(data.contactId.city + " " + data.contactId.state + " " + data.contactId.zip);
tr4.appendChild(nr4);
element.appendChild(tr4);


const tr7 = document.createElement("p");
const nr7 = document.createTextNode("Phone " + data.contactId.phone);
tr7.appendChild(nr7);
element.appendChild(tr7);


});
    break;
  case 3:
  while (element.firstChild) {
    element.removeChild(element.lastChild);
  }
  const para4 = document.createElement("h3");
const node4 = document.createTextNode("Employee Management");
para4.appendChild(node4);
element.appendChild(para4);


    break;
  case 4:
  while (element.firstChild) {
    element.removeChild(element.lastChild);
  }
  const para5 = document.createElement("h3");
const node5 = document.createTextNode("Employee Grading");
para5.appendChild(node5);
element.appendChild(para5);

}

    
}); 
 
        </script>
</html>